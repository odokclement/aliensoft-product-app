import{c as n,d as t,i as a,x as $,r as g,o as j,s as h,m as b,e as u,t as p,f as c,v as m,q as w,k as L,p as R,A as _,B as q,a as A}from"./index-DTV4gXJZ.js";import{u as Z}from"./products-Dm-BgZhB.js";import{r as G,a as N}from"./ArrowUpTrayIcon-CKD_PF0R.js";function H(k,v){return a(),n("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"fill-rule":"evenodd",d:"M19.916 4.626a.75.75 0 0 1 .208 1.04l-9 13.5a.75.75 0 0 1-1.154.114l-6-6a.75.75 0 0 1 1.06-1.06l5.353 5.353 8.493-12.74a.75.75 0 0 1 1.04-.207Z","clip-rule":"evenodd"})])}function O(k,v){return a(),n("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{d:"M5.625 1.5c-1.036 0-1.875.84-1.875 1.875v17.25c0 1.035.84 1.875 1.875 1.875h12.75c1.035 0 1.875-.84 1.875-1.875V12.75A3.75 3.75 0 0 0 16.5 9h-1.875a1.875 1.875 0 0 1-1.875-1.875V5.25A3.75 3.75 0 0 0 9 1.5H5.625Z"}),t("path",{d:"M12.971 1.816A5.23 5.23 0 0 1 14.25 5.25v1.875c0 .207.168.375.375.375H16.5a5.23 5.23 0 0 1 3.434 1.279 9.768 9.768 0 0 0-6.963-6.963Z"})])}function T(k,v){return a(),n("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"fill-rule":"evenodd",d:"M5.25 2.25a3 3 0 0 0-3 3v4.318a3 3 0 0 0 .879 2.121l9.58 9.581c.92.92 2.39 1.186 3.548.428a18.849 18.849 0 0 0 5.441-5.44c.758-1.16.492-2.629-.428-3.548l-9.58-9.581a3 3 0 0 0-2.122-.879H5.25ZM6.375 7.5a1.125 1.125 0 1 0 0-2.25 1.125 1.125 0 0 0 0 2.25Z","clip-rule":"evenodd"})])}function z(k,v){return a(),n("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"fill-rule":"evenodd",d:"M5.47 5.47a.75.75 0 0 1 1.06 0L12 10.94l5.47-5.47a.75.75 0 1 1 1.06 1.06L13.06 12l5.47 5.47a.75.75 0 1 1-1.06 1.06L12 13.06l-5.47 5.47a.75.75 0 0 1-1.06-1.06L10.94 12 5.47 6.53a.75.75 0 0 1 0-1.06Z","clip-rule":"evenodd"})])}const J={class:"min-h-screen bg-gray-50 px-4 py-6 sm:px-6 lg:px-8"},Q={class:"mb-6 flex items-center justify-between"},X={class:"flex items-center gap-3"},K={class:"bg-white border border-gray-200 rounded-xl shadow-sm p-6 sm:p-8 max-w-4xl mx-auto"},W={class:"mb-8"},Y={class:"mt-2 flex items-center gap-2 text-sm text-gray-500"},ee={key:0,class:"text-center py-8"},te={key:1,class:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg"},oe={class:"text-red-700 text-sm"},re={key:2},le={class:"mb-4"},se={key:0,class:"mt-1 text-sm text-red-600"},ae={class:"mb-6"},ne={key:0,class:"mt-1 text-sm text-red-600"},ie={class:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6"},de={class:"relative"},ue={key:0,class:"mt-1 text-sm text-red-600"},ce={key:0,class:"mt-1 text-sm text-red-600"},pe={class:"mb-6"},be={key:0,class:"mt-1 text-sm text-red-600"},me={class:"mb-6"},ve={class:"mb-6"},ge={class:"mb-6"},xe={class:"mb-6"},ye={class:"flex gap-4"},fe={class:"flex items-center"},he={class:"flex items-center"},we={key:0,class:"mb-4"},ke={class:"flex items-center gap-4"},Pe=["src"],_e={class:"w-12 h-12 bg-blue-600 rounded-full flex items-center justify-center mb-3"},Ce={key:1,class:"mt-3 p-3 bg-blue-50 rounded-lg"},Ue={class:"flex items-center justify-between"},Ve={class:"flex items-center gap-2"},Se={class:"text-sm text-blue-700"},Ie={class:"flex justify-between items-center mt-8 pt-6 border-t border-gray-200"},Fe=["disabled"],Be={key:0},Me={key:1},Ee={class:"flex gap-4"},De=["disabled"],$e={key:1},je={key:2},Ae={__name:"EditProduct",setup(k){const v=A(),C=$(),P=Z(),x=C.params.id,y=g(null),f=g(null),o=g({title:"",description:"",category:"",price:0,stock:0,thumbnail:"",brand:"",rating:0,discountPercentage:0,availability:"in stock"}),i=g(!1),d=g(""),l=g({});j(async()=>{await U()});const U=async()=>{try{i.value=!0,d.value="",console.log("Fetching product with ID:",x);const r=await P.fetchProductById(x);if(r.success&&r.data){const e=r.data;console.log("Received product data:",e),o.value={title:e.title||"",description:e.description||"",category:e.category||"",price:e.price||0,stock:e.stock||0,thumbnail:e.thumbnail||"",brand:e.brand||"",rating:e.rating||0,discountPercentage:e.discountPercentage||0,availability:e.stock>0?"in stock":"out of stock"},console.log("Form populated with:",o.value)}else d.value=r.error||"Product not found"}catch(r){d.value="Failed to load product data",console.error("Error fetching product:",r)}finally{i.value=!1}},V=()=>{y.value?.click()},S=r=>{const e=r.target.files[0];e&&(f.value=e,o.value.thumbnail=URL.createObjectURL(e))},I=()=>{f.value=null,y.value.value=""},F=()=>{o.value.thumbnail="",f.value=null,y.value&&(y.value.value="")},B=r=>{r.target.style.display="none"},M=()=>(l.value={},o.value.title.trim()||(l.value.title="Product title is required"),o.value.description.trim()||(l.value.description="Product description is required"),o.value.price<=0&&(l.value.price="Price must be greater than 0"),o.value.stock<0&&(l.value.stock="Stock quantity cannot be negative"),o.value.category||(l.value.category="Category is required"),Object.keys(l.value).length===0),E=async()=>{if(M()){i.value=!0,d.value="";try{console.log("Updating product with data:",o.value);const r=await P.updateProduct(x,o.value);r.success?v.push("/products"):d.value=r.error||"Failed to update product"}catch(r){d.value="Failed to update product",console.error("Error updating product:",r)}finally{i.value=!1}}},D=async()=>{if(confirm("Are you sure you want to delete this product? This action cannot be undone.")){i.value=!0,d.value="";try{const r=await P.deleteProduct(x);r.success?v.push("/products"):d.value=r.error||"Failed to delete product"}catch(r){d.value="Failed to delete product",console.error("Error deleting product:",r)}finally{i.value=!1}}};return(r,e)=>(a(),n("div",J,[t("div",Q,[t("div",X,[t("button",{onClick:e[0]||(e[0]=s=>r.$router.push("/products")),class:"flex px-5 py-2 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition"},[h(b(G),{class:"w-5 h-5"}),e[12]||(e[12]=t("span",{class:"hidden sm:inline"},"Back to Products",-1))])])]),t("div",K,[t("div",W,[e[13]||(e[13]=t("h1",{class:"text-2xl sm:text-3xl font-bold text-gray-900 mb-2"},"Edit Product",-1)),e[14]||(e[14]=t("p",{class:"text-sm sm:text-base text-gray-600"},"Update the product details below.",-1)),t("div",Y,[h(b(T),{class:"w-4 h-4"}),t("span",null,"Product ID: "+p(b(x)),1)])]),i.value&&!o.value.title?(a(),n("div",ee,[...e[15]||(e[15]=[t("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"},null,-1),t("p",{class:"mt-2 text-gray-600"},"Loading product data...",-1)])])):u("",!0),d.value?(a(),n("div",te,[t("p",oe,p(d.value),1)])):u("",!0),!i.value||o.value.title?(a(),n("div",re,[e[33]||(e[33]=t("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Product Information",-1)),t("div",le,[e[16]||(e[16]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Product Title",-1)),c(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>o.value.title=s),type:"text",placeholder:"Enter product title",class:w(["w-full bg-white border border-gray-300 rounded-lg px-4 py-2.5 text-gray-800 focus:ring-2 focus:ring-blue-600 focus:border-transparent",{"border-red-300":l.value.title}])},null,2),[[m,o.value.title]]),l.value.title?(a(),n("p",se,p(l.value.title),1)):u("",!0)]),t("div",ae,[e[17]||(e[17]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Product Description",-1)),c(t("textarea",{"onUpdate:modelValue":e[2]||(e[2]=s=>o.value.description=s),rows:"3",placeholder:"Provide a detailed description of the product",class:w(["w-full bg-white border border-gray-300 rounded-lg px-4 py-2.5 text-gray-800 focus:ring-2 focus:ring-blue-600 focus:border-transparent",{"border-red-300":l.value.description}])},null,2),[[m,o.value.description]]),l.value.description?(a(),n("p",ne,p(l.value.description),1)):u("",!0)]),e[34]||(e[34]=t("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Pricing & Inventory",-1)),t("div",ie,[t("div",null,[e[19]||(e[19]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Price",-1)),t("div",de,[e[18]||(e[18]=t("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[t("span",{class:"text-gray-500 sm:text-sm"},"$")],-1)),c(t("input",{type:"number","onUpdate:modelValue":e[3]||(e[3]=s=>o.value.price=s),placeholder:"0.00",step:"0.01",min:"0",class:w(["w-full bg-white border border-gray-300 rounded-lg pl-7 pr-4 py-2.5 text-gray-800 focus:ring-2 focus:ring-blue-600 focus:border-transparent",{"border-red-300":l.value.price}])},null,2),[[m,o.value.price,void 0,{number:!0}]])]),l.value.price?(a(),n("p",ue,p(l.value.price),1)):u("",!0)]),t("div",null,[e[20]||(e[20]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Stock Quantity",-1)),c(t("input",{type:"number","onUpdate:modelValue":e[4]||(e[4]=s=>o.value.stock=s),placeholder:"Enter stock quantity",min:"0",class:w(["w-full bg-white border border-gray-300 rounded-lg px-4 py-2.5 text-gray-800 focus:ring-2 focus:ring-blue-600 focus:border-transparent",{"border-red-300":l.value.stock}])},null,2),[[m,o.value.stock,void 0,{number:!0}]]),l.value.stock?(a(),n("p",ce,p(l.value.stock),1)):u("",!0)])]),t("div",pe,[e[22]||(e[22]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Category",-1)),c(t("select",{"onUpdate:modelValue":e[5]||(e[5]=s=>o.value.category=s),class:w(["w-full bg-white border border-gray-300 rounded-lg px-4 py-2.5 text-gray-700 focus:ring-2 focus:ring-blue-600 focus:border-transparent",{"border-red-300":l.value.category}])},[...e[21]||(e[21]=[R('<option value="">Select a category</option><option value="smartphones">Smartphones</option><option value="laptops">Laptops</option><option value="fragrances">Fragrances</option><option value="skincare">Skincare</option><option value="groceries">Groceries</option><option value="home-decoration">Home Decoration</option>',7)])],2),[[L,o.value.category]]),l.value.category?(a(),n("p",be,p(l.value.category),1)):u("",!0)]),t("div",me,[e[23]||(e[23]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Brand",-1)),c(t("input",{"onUpdate:modelValue":e[6]||(e[6]=s=>o.value.brand=s),type:"text",placeholder:"Enter brand name",class:"w-full bg-white border border-gray-300 rounded-lg px-4 py-2.5 text-gray-800 focus:ring-2 focus:ring-blue-600 focus:border-transparent"},null,512),[[m,o.value.brand]])]),t("div",ve,[e[24]||(e[24]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Rating",-1)),c(t("input",{type:"number","onUpdate:modelValue":e[7]||(e[7]=s=>o.value.rating=s),placeholder:"0.0",step:"0.1",min:"0",max:"5",class:"w-full bg-white border border-gray-300 rounded-lg px-4 py-2.5 text-gray-800 focus:ring-2 focus:ring-blue-600 focus:border-transparent"},null,512),[[m,o.value.rating,void 0,{number:!0}]])]),t("div",ge,[e[25]||(e[25]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Discount Percentage",-1)),c(t("input",{type:"number","onUpdate:modelValue":e[8]||(e[8]=s=>o.value.discountPercentage=s),placeholder:"0%",step:"0.1",min:"0",max:"100",class:"w-full bg-white border border-gray-300 rounded-lg px-4 py-2.5 text-gray-800 focus:ring-2 focus:ring-blue-600 focus:border-transparent"},null,512),[[m,o.value.discountPercentage,void 0,{number:!0}]])]),t("div",xe,[e[28]||(e[28]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Status",-1)),t("div",ye,[t("label",fe,[c(t("input",{type:"radio","onUpdate:modelValue":e[9]||(e[9]=s=>o.value.availability=s),value:"in stock",class:"text-blue-600 focus:ring-blue-500"},null,512),[[_,o.value.availability]]),e[26]||(e[26]=t("span",{class:"ml-2 text-sm text-gray-700"},"In Stock",-1))]),t("label",he,[c(t("input",{type:"radio","onUpdate:modelValue":e[10]||(e[10]=s=>o.value.availability=s),value:"out of stock",class:"text-blue-600 focus:ring-blue-500"},null,512),[[_,o.value.availability]]),e[27]||(e[27]=t("span",{class:"ml-2 text-sm text-gray-700"},"Out of Stock",-1))])])]),e[35]||(e[35]=t("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Media",-1)),o.value.thumbnail?(a(),n("div",we,[e[29]||(e[29]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Current Image",-1)),t("div",ke,[t("img",{src:o.value.thumbnail,alt:"Product thumbnail",class:"w-20 h-20 object-cover rounded-lg border border-gray-200",onError:B},null,40,Pe),t("button",{onClick:F,class:"px-3 py-1.5 text-sm text-red-600 border border-red-300 rounded-lg hover:bg-red-50 transition-colors"}," Remove Image ")])])):u("",!0),t("div",{onClick:V,class:"border-2 border-dashed border-gray-300 rounded-xl p-6 text-center flex flex-col items-center justify-center cursor-pointer hover:bg-gray-50 transition-colors"},[t("div",_e,[h(b(N),{class:"w-6 h-6 text-white"})]),e[30]||(e[30]=t("p",{class:"text-blue-700 font-medium text-sm"},"Click to upload",-1)),e[31]||(e[31]=t("p",{class:"text-gray-500 text-xs mt-1"},"or drag and drop",-1)),e[32]||(e[32]=t("p",{class:"text-gray-400 text-xs mt-1"},"SVG, PNG, JPG or GIF (MAX. 800Ã—400px)",-1)),t("input",{ref_key:"fileInput",ref:y,type:"file",onChange:S,accept:"image/*",class:"hidden"},null,544)]),f.value?(a(),n("div",Ce,[t("div",Ue,[t("div",Ve,[h(b(O),{class:"w-4 h-4 text-blue-600"}),t("span",Se,p(f.value.name),1)]),t("button",{onClick:I,class:"text-blue-600 hover:text-blue-800"},[h(b(z),{class:"w-4 h-4"})])])])):u("",!0),t("div",Ie,[t("button",{onClick:D,disabled:i.value,class:"px-5 py-2 text-red-600 border border-red-300 rounded-lg hover:bg-red-50 transition disabled:opacity-50"},[i.value?(a(),n("span",Be,"Deleting...")):(a(),n("span",Me,"Delete Product"))],8,Fe),t("div",Ee,[t("button",{onClick:e[11]||(e[11]=s=>r.$router.push("/products")),class:"px-5 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-100 transition"}," Cancel "),t("button",{onClick:E,disabled:i.value,class:"px-5 py-2 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition disabled:opacity-50 flex items-center gap-2"},[i.value?u("",!0):(a(),q(b(H),{key:0,class:"w-4 h-4"})),i.value?(a(),n("span",$e,"Updating...")):(a(),n("span",je,"Update Product"))],8,De)])])])):u("",!0)])]))}};export{Ae as default};
